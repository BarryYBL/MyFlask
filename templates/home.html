{% import 'macro.html' as macro %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自动化平台</title>

    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <link rel="stylesheet" type="text/css" href="/static/easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="/static/easyui/themes/icon.css">
    <script type="text/javascript" src="/static/easyui/jquery.min.js"></script>
    <script type="text/javascript" src="/static/easyui/jquery.easyui.min.js"></script>

    <link href="{{url_for('static',filename='css/prompt-box.css')}}"  rel="stylesheet">
    <link href="{{url_for('static',filename='css/amazeui.min.css')}}"  rel="stylesheet">
    <link href="{{url_for('static',filename='css/admin.css')}}"  rel="stylesheet">
    <link href="{{url_for('static',filename='css/app.css')}}"  rel="stylesheet">
    <link href="{{url_for('static',filename='css/bootstrap.min.css')}}"  rel="stylesheet">
    <link rel="icon" href="{{url_for('static',filename='img/log.png')}}" type="image/x-icon">

    <link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/collapse/jquery.js"></script>
    <script type="text/javascript" src="/static/js/collapse/bootstrap-collapse.js"></script>
    <script src="https://cdn.bootcss.com/jquery-validate/1.15.1/jquery.validate.js"></script>
    <link href="{{url_for('static',filename='css/badge/badge.css')}}?v=1.0.6"  rel="stylesheet">
    <script src="{{url_for('static',filename='js/alert-style.js' , charset= "UTF-8")}}"></script>
    <link href="{{url_for('static',filename='css/home-css.css')}}"  rel="stylesheet">
    <script src="{{url_for('static',filename='js/home-js.js' , charset= "UTF-8")}}"></script>
</head>

<body class="easyui-layout">
    <div data-options="region:'north',title:'登录面板',split:false, collapsible:false" style="height:100px;">
{#        <div class="row" >#}
{#            <nav class="navbar navbar-default" role="navigation"#}
{#                 style="padding: 10px 0 10px 0;margin:0 15px 0 15px">#}
{#                <div class="navbar-header"  >#}
{#                    <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-ex1-collapse">#}
{#                        <span class="sr-only">Toggle navigation</span>#}
{#                        <span class="icon-bar"></span>#}
{#                        <span class="icon-bar"></span>#}
{#                        <span class="icon-bar"></span>#}
{#                    </button>#}
{#                    <a href="#" class="navbar-brand">自动化接口测试</a>#}
{##}
{#                </div>#}
{#                <div class="collapse navbar-collapse navbar-ex1-collapse">#}
{#                    <ul class="nav navbar-nav">#}
{#                        <li><a href="#" class="dropdown-toggle" data-toggle="dropdown">反馈管理 <b class="caret"></b></a>#}
{#                            <ul class="dropdown-menu">#}
{#                                <li><a href="#">问题列表</a></li>#}
{#                                <li><a href="#">详情页面</a></li>#}
{#                            </ul>#}
{#                        </li>#}
{#                    </ul>#}
                    <ul class="nav navbar-nav navbar-right">
                        {% if session.get('username') %}
                            <li><a href=""><i class="fa fa-user"></i>{{session.get('username')}}</a></li>
                            <li><a href="{{ url_for('login_blueprint.logout') }}">退出登陆</a></li>
                        {% elif session.get('username') == None %}
                            <li><a href="{{ url_for('login_blueprint.login') }}" >请登陆</a></li>
                        {% endif %}
                    </ul>
{#                </div>#}
{#            </nav>#}
{#        </div>#}
    </div>
    <div data-options="region:'south',title:'日志面板',split:true" style="height:100px;">
        {% if session.get('username') %}
            <div class="panel panel-default col-lg-12" style="float: left;">
                <div  id="front_logs" class="col-lg-3 logs" style="height: 200px"></div>
                <div  id="flask_logs" class="col-lg-9 logs" style="height: 200px"></div>
            </div>
            <div class="panel-footer" style="clear:both;"></div>
        {% endif %}
        <div class="col-md-offset-1">
            {{ macro.prompt_msg()}}
            {{ macro.flash_msg() }}
        </div>
    </div>
    <div data-options="region:'east',title:'信息面板',split:true" style="width:250px;">
        <div class="" id="request_body_show" style="height: 100%;display:block;word-break: break-all;word-wrap: break-word">
        </div>
    </div>
    <div data-options="region:'west',title:'菜单面板',split:true" style="width:10%;">
         <div class="" style="background-color: rgba(248,248,248,0.42);margin-top: 20px">
            {% if session.get('username') %}
            <div class="tpl-left-nav-list">
                <ul class="tpl-left-nav-menu ">
                    {% if  session.get('username') == 'admin' %}
                        <li class="tpl-left-nav-item">
                            <a href="{{ url_for('user_blueprint.user_regist') }}" class="nav-link ">
                                <i class="am-icon-user am-icon-fw"></i>
                                <span>用户注册</span>
                            </a>
                        </li>
                    {% endif %}
                    <li class="tpl-left-nav-item">
                         <a href="{{ url_for('testcase_blueprint.test_case_list') }}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-book am-icon-fw"></i>
                            <span>测试用例</span>
                            </a>
                    </li>
                    <li class="tpl-left-nav-item">
                            <a href="{{ url_for('testcase_scene_blueprint.testcase_scene_testcase_list') }}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-briefcase am-icon-fw"></i>
                            <span>测试场景</span>
                            </a>
                    </li>
                    <li class="tpl-left-nav-item">
                            <a href="{{ url_for('case_group_blueprint.case_group_list')}}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-group am-icon-fw"></i>
                            <span>用例分组</span>
                            </a>
                    </li>
                    <li class="tpl-left-nav-item">
                            <a href="{{ url_for('variables_blueprint.variable_list')}}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-cubes am-icon-fw"></i>
                            <span>全局变量</span>
                            </a>
                    </li>
                    <li class="tpl-left-nav-item">
                            <a href="{{ url_for('request_headers_blueprint.request_headers_list')}}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-mortar-board am-icon-fw"></i>
                            <span>请求头部</span>
                            </a>
                    </li>
                    <li class="tpl-left-nav-item">
                            <a href="{{ url_for('mysql_blueprint.mysql_list')}}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-database am-icon-fw"></i>
                            <span>数据库配置</span>
                            </a>
                    </li>
                    <li class="tpl-left-nav-item">
                        <a href="{{ url_for('test_case_request_blueprint.test_case_request') }}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-play am-icon-fw"></i>
                            <span>测试执行</span>
                        </a>
                    </li>
                    <li class="tpl-left-nav-item">
                        <a href="{{ url_for('testcase_report_blueprint.testcase_report_list') }}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-table am-icon-fw"></i>
                            <span>测试报告</span>
                        </a>
                    </li>
                    <li class="tpl-left-nav-item">
                        <a href="{{ url_for('job_blueprint.job_list') }}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-tasks am-icon-fw"></i>
                            <span>测试任务</span>
                        </a>
                    </li>
                    <li class="tpl-left-nav-item">
                        <a href="{{ url_for('mail_blueprint.mail_list') }}" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-envelope am-icon-fw"></i>
                            <span>邮件设置</span>
                        </a>
                    </li>
                    <li class="tpl-left-nav-item">
                        <a href="{{ url_for('project_group_blueprint.project_group_urls') }}" class="nav-link tpl-left-nav-link-list">
                            <i class="fa-sitemap am-icon-fw"></i>
                            <span>项目组配置</span>
                        </a>
                    </li>
    {#                <li class="tpl-left-nav-item">#}
    {#                    <a href="{{ url_for('home_blueprint.test') }}" class="nav-link tpl-left-nav-link-list">#}
    {#                        <i class="am-icon-cog am-icon-fw"></i>#}
    {#                        <span>test</span>#}
    {#                    </a>#}
    {#                </li>#}
                </ul>
            </div>
            {% else %}
                请登录管理员账号注册用户
            {% endif %}
        </div>
    </div>
    <div data-options="region:'center',title:'{% block title %}
                                {% endblock %}'" style="padding:5px;">
        <div  class=" body-content">
        <div class="" >
            <div class="" >
                <div class="col-md-12" >
                    <div class="" id="get_container_height" >
                        <div class="panel-heading text-center" style="background-color: rgb(238, 238, 238); border: solid 1px rgb(238, 238, 238);height: 60px" >
                            {% if session.get('username') %}
                            <input id="to_back" type="button" class="btn btn-default relative-position" onclick="history.go(-1);scrollTop = 0" value="返回上一步">
                            {% endif %}
                        </div>
                            <div id="ajax_content">
                            <div style="height: 20px;width: 100%;border-left: 1px  solid rgb(238, 238, 238);border-right: 1px  solid rgb(238, 238, 238);"></div>
                                {%block content%}
                                {%endblock%}
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>
{% block js %}
{%endblock%}
</html>
{% block css %}
{% endblock %}
<script>
    $(document).ready(function () {
        function auto_front_logs(){
                $.ajax({
                    url:{{ url_for('home_blueprint.front_logs') }},
                    method:'GET',
                    success:function(response){
                        let front_log = JSON.parse(response)["front_log"];
                        $("#front_logs").html(front_log)
                    }
                })
            }
        function auto_flask_logs(){
            $.ajax({
                url:{{ url_for('home_blueprint.flask_logs') }},
                method:'GET',
                success:function(response){
                    let flask_logs = JSON.parse(response)["flask_logs"];
                    $("#flask_logs").html(flask_logs)
                }
            })
    }
        window.setTimeout(auto_front_logs, 2);
        window.setTimeout(auto_flask_logs, 1);
    })
</script>
